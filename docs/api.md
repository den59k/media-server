# Основные API для работы с микросервисом:

При помощи команд ниже можно организовать подключение 2х или более пользователей.

### Создание комнаты: 
```POST /rooms/:room_id```, где *:room_id* - ID комнаты, который может как быть предварительно сгенерирован или пропущен -
в этом случае медиасервер сгенерирует его автоматически

В теле запроса можно передать объект, содержащий поле userId. В этом случае комната создастся вместе с пользователем

```
body:
{
  userId?: string
}

Возвращает:
{
  room_id: string
}
```

### Добавление пользователя в комнату
```POST /rooms/:room_id/users/:user_id```, где *:room_id* - ID комнаты, а *:user_id* - ID пользователя 
(ID пользователя генерируется самим бекэнд-сервером заранее, и должно быть уникально для каждого подключения)

Добавляет пользователя в комнату, возвращая offer для этого пользователя

```
Возвращает:
{
  offer: SDP,
}
```

### Начало вещания пользователем
```POST /rooms/:room_id/users/:user_id/produce```

Дает возможность начать трансляцию пользователю, возвращая answerSDP для этого пользователя и offerSDP для всех остальных пользоваетелей.

```
body:
{
  offer: SDP
}

Возвращает:
{
  answer: SDP,
  outbound: Array<{
    id: string,
    offer: SDP
  }>
}
```

### Подтверждение подключения пользователя
```POST /rooms/:room_id/users/:user_id/consume```

```
body: 
{
  answer: SDP
}
```

### Удаление комнаты:
```DELETE /rooms/:room_id```

Удаляет комнату *room_id*

Возвращает:
```
{
  count: number
}
```

### Удаление пользователя из комнаты:
```DELETE /rooms/:room_id/users/:user_id```

Удаляем пользователя *user_id* из комнаты *room_id*, и возвращает offerSDP для всех пользователей, 
с которыми велась трансляция до этого.
Если пользователь ничего не транслировал, то outbound содержит пустой массив.

Возвращает:
```
{
  outbound: Array<{
    id: string,
    offer: SDP
  }>
}
```